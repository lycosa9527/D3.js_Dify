<!DOCTYPE html>
<html>
<head>
    <title>Tree Map Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #d3-container { border: 1px solid #ccc; min-height: 400px; }
        button { margin: 10px; padding: 10px; }
    </style>
</head>
<body>
    <h1>Tree Map Renderer Test</h1>
    <button onclick="testTreeMap()">Test Tree Map</button>
    <div id="d3-container"></div>

    <!-- Load D3.js first -->
    <script src="/static/js/d3.min.js"></script>
    
    <!-- Load shared utilities -->
    <script src="/static/js/renderers/shared-utilities.js"></script>
    
    <!-- Load tree renderer -->
    <script src="/static/js/renderers/tree-renderer.js"></script>
    
    <script>
        function testTreeMap() {
            const spec = {
                topic: "Animals",
                children: [
                    {
                        label: "Mammals",
                        children: [
                            { label: "Dogs" },
                            { label: "Cats" },
                            { label: "Horses" }
                        ]
                    },
                    {
                        label: "Birds",
                        children: [
                            { label: "Eagles" },
                            { label: "Owls" },
                            { label: "Sparrows" }
                        ]
                    },
                    {
                        label: "Fish",
                        children: [
                            { label: "Salmon" },
                            { label: "Tuna" },
                            { label: "Sharks" }
                        ]
                    }
                ]
            };
            
            try {
                console.log('Testing tree map with spec:', spec);
                console.log('renderTreeMap function available:', typeof renderTreeMap);
                console.log('TreeRenderer available:', typeof TreeRenderer);
                
                if (typeof renderTreeMap === 'function') {
                    renderTreeMap(spec, null, { baseWidth: 800, baseHeight: 600 });
                    console.log('Tree map rendered successfully');
                } else {
                    console.error('renderTreeMap function not found');
                    document.getElementById('d3-container').innerHTML = 
                        '<div style="color: red;">Error: renderTreeMap function not found</div>';
                }
            } catch (error) {
                console.error('Error rendering tree map:', error);
                document.getElementById('d3-container').innerHTML = 
                    '<div style="color: red;">Error: ' + error.message + '</div>';
            }
        }
    </script>
</body>
</html>
